(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b21c008"],{"0611":function(t,a,s){},"2cb5":function(t,a,s){"use strict";s("0611")},"305b":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"secure"},[s("div",{staticClass:"navBar"},[s("van-nav-bar",{attrs:{title:"安全中心","left-text":"返回","left-arrow":""},on:{"click-left":t.goBack}})],1),s("bg-box",[s("div",{staticClass:"content"},[s("van-cell-group",[s("van-cell",{attrs:{title:"修改密码","is-link":""},on:{click:t.isOpen}}),s("van-cell",{attrs:{title:"注销账户","is-link":""},on:{click:t.unsubscribe}})],1),s("div",{staticClass:"btn",staticStyle:{"margin-top":"100px"}},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"},on:{click:t.quit}},[t._v(" 退出登录 ")])],1)],1)]),s("div",{staticClass:"changePass"},[s("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:t.showPop,callback:function(a){t.showPop=a},expression:"showPop"}},[s("div",{staticClass:"title"},[t._v("修改密码")]),s("van-form",[s("van-field",{attrs:{name:"旧密码",label:"旧密码",placeholder:"6-16位密码且以字母开头"},model:{value:t.password.oldPass,callback:function(a){t.$set(t.password,"oldPass",a)},expression:"password.oldPass"}}),s("van-field",{attrs:{type:"password",name:"新密码",label:"新密码",placeholder:"6-16位密码且以字母开头"},model:{value:t.password.newPass,callback:function(a){t.$set(t.password,"newPass",a)},expression:"password.newPass"}}),s("div",{staticClass:"btn"},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"},on:{click:t.changePassword}},[t._v(" 确认修改 ")])],1)],1)],1)],1)],1)},o=[],n=s("ce8c"),i=s("a880"),r={components:{bgBox:n["a"]},name:"Secure",data:function(){return{showPop:!1,password:{oldPass:"",newPass:""}}},methods:{goBack:function(){this.$router.go(-1)},isOpen:function(){this.showPop=!this.showPop},quit:function(){var t=this;this.$dialog.confirm({title:"退出登录",message:"是否确认退出登录?",confirmButtonColor:"#0C34BA"}).then((function(){t.$toast.loading({message:"正在退出...",forbidClick:!0,duration:0}),setTimeout((function(){t.$toast.clear(),localStorage.removeItem("__tk"),t.$router.push("/")}),800)})).catch((function(a){t.$toast.clear()}))},changePassword:function(){var t=this,a={oldPassword:{value:this.password.oldPass,reg:/^[a-zA-Z]\w{7,15}$/,msg:"旧密码由数字字母下划线组合(6-16字符)"},newPassword:{value:this.password.newPass,reg:/^[a-zA-Z]\w{7,15}$/,msg:"新密码由数字字母下划线组合(6-16字符)"}},s=i["a"].valid(a);if(s){if(this.password.newPass==this.password.oldPass)return void this.$toast("新密码不能与旧密码相同");var e=localStorage.getItem("__tk");if(!e)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/updatePassword",data:{appkey:this.appkey,tokenString:e,password:this.password.newPass,oldPassword:this.password.oldPass}}).then((function(a){t.$toast.clear(),700==a.data.code?t.$router.push("Login"):"E001"==a.data.code&&(localStorage.removeItem("__tk"),t.$router.push({name:"Login"}),t.$toast(a.data.msg))}))}},unsubscribe:function(){var t=this;this.$dialog.confirm({title:"注销账户",message:"是否确定注销账户?一旦注销无法恢复!",confirmButtonColor:"#0C34BA"}).then((function(){var a=localStorage.getItem("__tk");if(!a)return t.$toast("请先登录"),t.$router.push({name:"Login"});t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),t.axios({method:"POST",url:"/destroyAccount",data:{appkey:t.appkey,tokenString:a}}).then((function(a){t.$toast.clear(),700==a.data.code?t.$router.push({name:"Login"}):"G001"==a.data.code&&setTimeout((function(){localStorage.removeItem("__tk"),t.$router.push({name:"Login"})}),800),t.$toast(a.data.msg)}))}))}}},c=r,l=(s("2cb5"),s("2877")),u=Object(l["a"])(c,e,o,!1,null,"3200b8fe",null);a["default"]=u.exports},"5c58":function(t,a,s){},a6f6:function(t,a,s){"use strict";s("5c58")},a880:function(t,a,s){"use strict";function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function o(t,a){for(var s=0;s<a.length;s++){var e=a[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function n(t,a,s){return a&&o(t.prototype,a),s&&o(t,s),t}s.d(a,"a",(function(){return l}));s("a6919");var i=s("01e2"),r=s("2b0e");r["a"].use(i["a"]);var c=function(){function t(){e(this,t)}return n(t,[{key:"valid",value:function(t){for(var a in t)if(!t[a].reg.test(t[a].value))return Object(i["a"])(t[a].msg),!1;return!0}}]),t}(),l=new c},ce8c:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"bg-box"},[s("div",{staticClass:"bg"},[s("div",{staticClass:"bg-content"},[t._t("default")],2)])])},o=[],n={name:"bgBox"},i=n,r=(s("a6f6"),s("2877")),c=Object(r["a"])(i,e,o,!1,null,"f8c5cfe8",null);a["a"]=c.exports}}]);
//# sourceMappingURL=chunk-0b21c008.40abb250.js.map