(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc4a564a"],{4621:function(t,e,a){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),i=a("5899"),n="["+i+"]",s=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),c=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(s,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},"5c58":function(t,e,a){},7156:function(t,e,a){var r=a("861d"),i=a("d2bb");t.exports=function(t,e,a){var n,s;return i&&"function"==typeof(n=e.constructor)&&n!==a&&r(s=n.prototype)&&s!==a.prototype&&i(t,s),t}},"77eb":function(t,e,a){"use strict";a("4621")},"88fc":function(t,e,a){"use strict";a("d2e2")},"95c9":function(t,e,a){"use strict";a("9f1c")},"9f1c":function(t,e,a){},a434:function(t,e,a){"use strict";var r=a("23e7"),i=a("23cb"),n=a("a691"),s=a("50c4"),o=a("7b0b"),c=a("65f0"),u=a("8418"),d=a("1dde"),l=a("ae40"),f=d("splice"),v=l("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,p=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!v},{splice:function(t,e){var a,r,d,l,f,v,b=o(this),_=s(b.length),I=i(t,_),C=arguments.length;if(0===C?a=r=0:1===C?(a=0,r=_-I):(a=C-2,r=p(h(n(e),0),_-I)),_+a-r>m)throw TypeError(g);for(d=c(b,r),l=0;l<r;l++)f=I+l,f in b&&u(d,l,b[f]);if(d.length=r,a<r){for(l=I;l<_-r;l++)f=l+r,v=l+a,f in b?b[v]=b[f]:delete b[v];for(l=_;l>_-r+a;l--)delete b[l-1]}else if(a>r)for(l=_-r;l>I;l--)f=l+r-1,v=l+a-1,f in b?b[v]=b[f]:delete b[v];for(l=0;l<a;l++)b[l+I]=arguments[l+2];return b.length=_-r+a,d}})},a6f6:function(t,e,a){"use strict";a("5c58")},a9e3:function(t,e,a){"use strict";var r=a("83ab"),i=a("da84"),n=a("94ca"),s=a("6eeb"),o=a("5135"),c=a("c6b6"),u=a("7156"),d=a("c04e"),l=a("d039"),f=a("7c73"),v=a("241c").f,h=a("06cf").f,p=a("9bf2").f,m=a("58a8").trim,g="Number",b=i[g],_=b.prototype,I=c(f(_))==g,C=function(t){var e,a,r,i,n,s,o,c,u=d(t,!1);if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(n=u.slice(2),s=n.length,o=0;o<s;o++)if(c=n.charCodeAt(o),c<48||c>i)return NaN;return parseInt(n,r)}return+u};if(n(g,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var x,k=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof k&&(I?l((function(){_.valueOf.call(a)})):c(a)!=g)?u(new b(C(e)),a,k):C(e)},y=r?v(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),$=0;y.length>$;$++)o(b,x=y[$])&&!o(k,x)&&p(k,x,h(b,x));k.prototype=_,_.constructor=k,s(i,g,k)}},b727:function(t,e,a){var r=a("0366"),i=a("44ad"),n=a("7b0b"),s=a("50c4"),o=a("65f0"),c=[].push,u=function(t){var e=1==t,a=2==t,u=3==t,d=4==t,l=6==t,f=5==t||l;return function(v,h,p,m){for(var g,b,_=n(v),I=i(_),C=r(h,p,3),x=s(I.length),k=0,y=m||o,$=e?y(v,x):a?y(v,0):void 0;x>k;k++)if((f||k in I)&&(g=I[k],b=C(g,k,_),t))if(e)$[k]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return k;case 2:c.call($,g)}else if(d)return!1;return l?-1:u||d?d:$}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},ce8c:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-box"},[a("div",{staticClass:"bg"},[a("div",{staticClass:"bg-content"},[t._t("default")],2)])])},i=[],n={name:"bgBox"},s=n,o=(a("a6f6"),a("2877")),c=Object(o["a"])(s,r,i,!1,null,"f8c5cfe8",null);e["a"]=c.exports},cf2a:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},[a("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回","left-arrow":""},on:{"click-left":t.goBack}}),a("bg-box",[t.isHas?a("div",[a("van-tabs",{on:{change:t.changeTab},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("van-tab",{attrs:{title:"全部"}},t._l(t.orderDatas,(function(e,r){return a("orderList",{key:e.oid,attrs:{isRight:!0,count:e.count,total:e.total,num:e.oid,"is-receive":2==e.status},on:{receive:function(a){return t.confirmReceive(e,r)},remove:function(a){return t.removeOrder(e.oid,r)}}},[t._l(e.data,(function(t,e){return a("orderItem",{key:e,attrs:{item:t}})}))],2)})),1),a("van-tab",{attrs:{title:"进行中"}},t._l(t.inProgressData,(function(e,r){return a("orderList",{key:r,attrs:{isRight:!0,count:e.count,total:e.total,num:e.oid,"is-receive":2==e.status},on:{receive:function(a){return t.confirmReceive(e,r)},remove:function(a){return t.removeOrder(e.oid,r)}}},t._l(e.data,(function(t,e){return a("orderItem",{key:e,attrs:{item:t}})})),1)})),1),a("van-tab",{attrs:{title:"已完成"}},t._l(t.finishedData,(function(e,r){return a("orderList",{key:r,attrs:{isRight:!0,count:e.count,total:e.total,num:e.oid,"is-receive":2==e.status},on:{receive:function(a){return t.confirmReceive(e,r)},remove:function(a){return t.removeOrder(e.oid,r)}}},t._l(e.data,(function(t,e){return a("orderItem",{key:e,attrs:{item:t}})})),1)})),1)],1)],1):a("div",[a("van-empty",{attrs:{description:"没有订单"}})],1)])],1)},i=[],n=(a("d81d"),a("a434"),a("d3b7"),a("ce8c")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orderList"},[a("div",{staticClass:"order-tit clearfix"},[a("div",{staticClass:"No fl"},[t._v(t._s(t.num))]),t.isRight?a("div",{staticClass:"orderDel fr"},[t.isReceive?a("div",{staticClass:"right"},[a("div",{staticClass:"order-del",on:{click:t.remove}}),a("div",{staticClass:"order-finish"},[t._v("已完成")])]):a("div",{on:{click:t.receive}},[t._v("确认收货")])]):t._e()]),a("div",{staticClass:"order-content"},[t._t("default")],2),a("div",{staticClass:"footer"},[a("div",{staticClass:"time"},[t._v(t._s(t.time))]),a("div",{staticClass:"totalBox clearfix"},[a("div",{staticClass:"count fl"},[t._v("共计 "+t._s(t.count)+" 件商品")]),a("div",{staticClass:"total fr"},[t._v("合计 ￥"+t._s(t.total))])])])])},o=[],c=(a("a9e3"),{name:"orderList",props:{count:{type:Number,default:0},total:{type:[Number,String],default:0},num:{type:String,default:"订单编号"},time:{type:String,default:"2020-11-03 20:20:14"},isRight:{type:Boolean,default:!0},isReceive:{type:Boolean,default:!1}},methods:{receive:function(){this.$emit("receive")},remove:function(){this.$emit("remove")}}}),u=c,d=(a("77eb"),a("2877")),l=Object(d["a"])(u,s,o,!1,null,"5ae0ae8e",null),f=l.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orderItem"},[a("div",{staticClass:"proInfo"},[a("div",{staticClass:"proInfo-left"},[a("img",{staticClass:"auto-img",attrs:{src:t.item.smallImg}})]),a("div",{staticClass:"proInfo-right"},[a("div",{staticClass:"proInfo-title"},[a("span",{staticClass:"name"},[t._v(t._s(t.item.name))]),a("span",{staticClass:"pro-rule"},[t._v(t._s(t.item.rule))])]),a("div",{staticClass:"enname"},[t._v(t._s(t.item.enname))]),a("div",{staticClass:"priceAndCount clearfix"},[a("div",{staticClass:"price fl"},[t._v("￥"+t._s(t.item.price))]),a("div",{staticClass:"count fr"},[t._v("x"+t._s(t.item.count))])])])])])},h=[],p={name:"orderItem",props:{item:{type:Object,default:function(){return{}}}}},m=p,g=(a("88fc"),Object(d["a"])(m,v,h,!1,null,"4ee48063",null)),b=g.exports;a.e("chunk-7714413c").then(a.t.bind(null,"be7a",7));var _={name:"Order",data:function(){return{tabIndex:0,isHas:!0,orderDatas:[],inProgressData:[],finishedData:[]}},created:function(){this.getOrderDataByStatus()},methods:{changeTab:function(t,e){this.dataProcessing()},getOrderDataByStatus:function(){var t=this,e=localStorage.getItem("__tk");if(!e)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findOrder",params:{appkey:this.appkey,tokenString:e,status:this.tabIndex}}).then((function(e){if(t.$toast.clear(),700==e.data.code)t.$router.push({name:"Login"});else if(7e4==e.data.code){if(0==t.tabIndex&&0==e.data.result.length)return void(t.isHas=!1);var a=[];e.data.result.map((function(t){for(var e=0;e<a.length;e++)if(a[e].oid==t.oid)return a[e].data.push(t),a[e].count+=t.count,void(a[e].total+=t.count*t.price);var r={};r.oid=t.oid,r.count=t.count,r.status=t.status,r.total=t.count*t.price,r.date=t.createdAt,r.data=[t],a.push(r)})),t.orderDatas=a}})).catch((function(e){t.$toast.clear()}))},confirmReceive:function(t,e){var a=this,r=localStorage.getItem("__tk");if(!r)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/receive",data:{appkey:this.appkey,tokenString:r,oid:t.oid}}).then((function(r){a.$toast.clear(),700==r.data.code?a.$router.push({name:"Login"}):8e4==r.data.code&&(1==a.tabIndex&&a.inProgressData.splice(e,1),t.status=2),a.$toast(r.data.msg)})).catch((function(t){a.$toast.clear()}))},removeOrder:function(t,e){var a=this,r=localStorage.getItem("__tk");if(!r)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/removeOrder",data:{appkey:this.appkey,tokenString:r,oid:t}}).then((function(t){a.$toast.clear(),700==t.data.code?a.$router.push({name:"Login"}):9e4==t.data.code&&(a.$toast(t.data.msg),a.orderDatas.splice(e,1),a.finishedData.splice(e,1))}))},goBack:function(){this.$router.go(-1)},dataProcessing:function(){var t=this;this.finishedData=[],this.inProgressData=[],this.orderDatas.map((function(e){1==e.status?t.inProgressData.push(e):2==e.status&&t.finishedData.push(e)}))}},components:{bgBox:n["a"],orderList:f,orderItem:b}},I=_,C=(a("95c9"),Object(d["a"])(I,r,i,!1,null,"042f1307",null));e["default"]=C.exports},d2e2:function(t,e,a){},d81d:function(t,e,a){"use strict";var r=a("23e7"),i=a("b727").map,n=a("1dde"),s=a("ae40"),o=n("map"),c=s("map");r({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-fc4a564a.6418f4d0.js.map